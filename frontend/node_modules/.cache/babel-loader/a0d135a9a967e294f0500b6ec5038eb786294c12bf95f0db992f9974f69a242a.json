{"ast":null,"code":"import React,{useEffect,useState}from'react';import Gift from'./Gift';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[coupon,setCoupon]=useState(null);// Cupón de hoy\nconst[unlockedCoupons,setUnlockedCoupons]=useState([]);// Lista de cupones desbloqueados\nconst[showTodayCoupon,setShowTodayCoupon]=useState(false);// Indica si mostramos el cupón de hoy recién desbloqueado\n// Cargar los datos iniciales\nuseEffect(()=>{// Obtener el cupón de hoy\nfetch('/api/coupon').then(res=>res.json()).then(data=>setCoupon(data.coupon)).catch(()=>setCoupon(null));// Obtener la lista de cupones desbloqueados\nfetch('/api/unlocked-coupons').then(res=>res.json()).then(data=>setUnlockedCoupons(data.unlockedCoupons)).catch(()=>setUnlockedCoupons([]));},[]);// Desbloquear el cupón de hoy\nconst unlockCoupon=()=>{fetch('/api/unlock',{method:'POST'}).then(res=>res.json()).then(data=>{setCoupon(data.coupon);setShowTodayCoupon(true);// Mostrar el cupón desbloqueado\n// Actualizar la lista de cupones desbloqueados\nfetch('/api/unlocked-coupons').then(res=>res.json()).then(data=>setUnlockedCoupons(data.unlockedCoupons)).catch(console.error);}).catch(console.error);};const toggleShowAllCoupons=()=>{setShowTodayCoupon(false);// Volver a la vista de todos los cupones desbloqueados\n};return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:coupon&&!coupon.unlocked?/*#__PURE__*/// Mostrar el regalo si el cupón de hoy no está desbloqueado\n_jsx(\"div\",{children:/*#__PURE__*/_jsx(Gift,{onClick:unlockCoupon})}):showTodayCoupon?/*#__PURE__*/// Mostrar el cupón de hoy recién desbloqueado\n_jsxs(\"div\",{className:\"coupon\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\xA1Has desbloqueado un cup\\xF3n de amistad!\"}),/*#__PURE__*/_jsxs(\"h2\",{children:[coupon.text,\" \\uD83D\\uDE0A\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleShowAllCoupons,children:\"Ver todos los cupones desbloqueados\"})]}):/*#__PURE__*/// Mostrar la lista de cupones desbloqueados\n_jsxs(\"div\",{className:\"unlocked-coupons\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Cupones desbloqueados:\"}),/*#__PURE__*/_jsx(\"ul\",{children:unlockedCoupons.map((coupon,index)=>/*#__PURE__*/_jsx(\"li\",{children:coupon.text},index))})]})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","Gift","jsx","_jsx","jsxs","_jsxs","App","coupon","setCoupon","unlockedCoupons","setUnlockedCoupons","showTodayCoupon","setShowTodayCoupon","fetch","then","res","json","data","catch","unlockCoupon","method","console","error","toggleShowAllCoupons","className","children","unlocked","onClick","text","map","index"],"sources":["C:/Users/tofol/Documents/cuponesGargamel/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Gift from './Gift';\r\nimport './App.css';\r\n\r\nfunction App() {\r\n    const [coupon, setCoupon] = useState(null); // Cupón de hoy\r\n    const [unlockedCoupons, setUnlockedCoupons] = useState([]); // Lista de cupones desbloqueados\r\n    const [showTodayCoupon, setShowTodayCoupon] = useState(false); // Indica si mostramos el cupón de hoy recién desbloqueado\r\n\r\n    // Cargar los datos iniciales\r\n    useEffect(() => {\r\n        // Obtener el cupón de hoy\r\n        fetch('/api/coupon')\r\n            .then((res) => res.json())\r\n            .then((data) => setCoupon(data.coupon))\r\n            .catch(() => setCoupon(null));\r\n\r\n        // Obtener la lista de cupones desbloqueados\r\n        fetch('/api/unlocked-coupons')\r\n            .then((res) => res.json())\r\n            .then((data) => setUnlockedCoupons(data.unlockedCoupons))\r\n            .catch(() => setUnlockedCoupons([]));\r\n    }, []);\r\n\r\n    // Desbloquear el cupón de hoy\r\n    const unlockCoupon = () => {\r\n        fetch('/api/unlock', { method: 'POST' })\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n                setCoupon(data.coupon);\r\n                setShowTodayCoupon(true); // Mostrar el cupón desbloqueado\r\n                // Actualizar la lista de cupones desbloqueados\r\n                fetch('/api/unlocked-coupons')\r\n                    .then((res) => res.json())\r\n                    .then((data) => setUnlockedCoupons(data.unlockedCoupons))\r\n                    .catch(console.error);\r\n            })\r\n            .catch(console.error);\r\n    };\r\n\r\n    const toggleShowAllCoupons = () => {\r\n        setShowTodayCoupon(false); // Volver a la vista de todos los cupones desbloqueados\r\n    };\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            {coupon && !coupon.unlocked ? (\r\n                // Mostrar el regalo si el cupón de hoy no está desbloqueado\r\n                <div>\r\n                    <Gift onClick={unlockCoupon} />\r\n                </div>\r\n            ) : showTodayCoupon ? (\r\n                // Mostrar el cupón de hoy recién desbloqueado\r\n                <div className=\"coupon\">\r\n                    <h1>¡Has desbloqueado un cupón de amistad!</h1>\r\n                    <h2>{coupon.text} 😊</h2>\r\n                    <button onClick={toggleShowAllCoupons}>\r\n                        Ver todos los cupones desbloqueados\r\n                    </button>\r\n                </div>\r\n            ) : (\r\n                // Mostrar la lista de cupones desbloqueados\r\n                <div className=\"unlocked-coupons\">\r\n                    <h1>Cupones desbloqueados:</h1>\r\n                    <ul>\r\n                        {unlockedCoupons.map((coupon, index) => (\r\n                            <li key={index}>{coupon.text}</li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}